Parameters:
  <<: !Include '../../_parameters.yml'

BudgetAlarms:
  Type: update-stacks
  Template: ./budget-alarms.yml
  StackName: !Sub '${resourcePrefix}-billing-alarm'
  TerminationProtection: false
  DefaultOrganizationBinding:
    Region: !Ref primaryRegion
    AccountsWithTag: budget-alarm-threshold
  Parameters:
    resourcePrefix: !Ref resourcePrefix
    accountAlias: !GetAtt CurrentAccount.Alias
    budgetAmount: !GetAtt CurrentAccount.Tags.budget-alarm-threshold
    emailAddress: !GetAtt CurrentAccount.Tags.budget-alarm-threshold-email-recipient
